# 1 问答系统架构🌟🌟

学习目标：*在本节主要介绍倒排表的使用，以及意图识别。*

相关知识点：

*问答系统*

## PART1: 问答系统的应用

### 案例：搭建一个智能问答系统

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815155212765.png" alt="image-20210815155212765" style="zoom:33%;" />

项目已提供问答库

基于检索式的问答库：对每个问题，计算它和问答库里每个问题的相似度，再返回相似度最大的问题的答案。

几个关键的步骤：

- 句子向量化：tf-idf， word2vec
- 计算相似度：余弦相似度
- 如何高效返回相似度最大的答案

### 基于检索的问答系统

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815161036226.png" alt="image-20210815161036226" style="zoom:33%;" />

基本流程：对每个问题，计算它和问答库里每个问题的相似度，再返回相似度最大的问题的答案。如果没有找到相似的问题，也要返回“没有查到相关答案”等结果。



“上述架构实际上存在一个比较严重的问题，就是**效率**。假如语料库中包含了上万个问题和答案， 那这时候需要做跟每一个问题的相似度比较，也就是时间复杂度随着语料库中问题的个数而增加，这显然是不可取的。何况，当数据量达到几十万个问题和答案时，实时做判断基本上不太可能。那如何提升效率呢？ 答案在于**倒排表**上！”

## PART2: 改进流程

相比前面所讲的流程，多了一个倒排表。倒排表的作用在于从问题库里快速筛选出和输入问题有可能相似的候选问题。倒排表最主要的应用场景是搜索引擎。

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815163534109.png" alt="image-20210815163534109" style="zoom:33%;" />

# 2 每个模块剖析🌟🌟

学习目标：*在本节主要介绍倒排表的使用，以及意图识别。*

相关知识点：

*问答系统*

## PART1: 加入倒排表

### 构建倒排表

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815171927932.png" alt="image-20210815171927932" style="zoom:33%;" />

构建倒排表：每个单词映射到包含这个单词的文档索引列表

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815172212985.png" alt="image-20210815172212985" style="zoom:25%;" />

### 构建倒排表-考虑相似单词

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210815173337232.png" alt="image-20210815173337232" style="zoom:33%;" />

### 基于句子相似度的排序

<img src="/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210817073046115.png" alt="image-20210817073046115" style="zoom:33%;" />

## PART2: 加入意图识别模块

![image-20210817073554746](/Users/yunwanxu/Library/Application Support/typora-user-images/image-20210817073554746.png)

加入意图识别模块，如果意图是闲聊则返回一个字符串，不惜要实现闲聊聊天引擎。

意图识别需要用到fasttext，剩下的模块前面都讲过。

## PART3: 代码讲解以及项目作业

Requirements.txt是依赖包列表



Preprocessor.ipynb是预处理，比如去除一些停用词低频词，不需要改动，只需要运行

Fasttext.ipynb	是一个分类模型，输入一段文本，输出分类结果，这部分代码也不需要改动

Retrieve.ipynb是构建倒排表，需要完成。要考虑单词本身也要考虑和它相似的单词。

QA_main.ipynb是搭建问答系统的过程

